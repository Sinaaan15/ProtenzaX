<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Complete Your Profile - ProtenzaX</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

<!-- MENU BUTTON -->
<button id="menuBtn" class="menu-btn" onclick="toggleMenu()">☰</button>

<!-- ACCOUNT ICON -->
<div class="account-container">
  <i class="fas fa-user-circle account-icon"></i>
</div>

<!-- SIDEBAR -->
<div id="mySidebar" class="sidebar">
  <span class="close-btn" onclick="toggleMenu()">✖</span>
  <a href="index.html">Home</a>
  <a href="menu.html">Our Menu</a>
</div>

<div id="overlay" class="overlay" onclick="toggleMenu()"></div>

<header>
  <h1>ProtenzaX</h1>
  <p><b><i>Built by Dedication. Fueled by Protein.</i></b></p>
</header>

<section>
  <h2>Complete Your Profile</h2>
  <p>Please fill out your details to continue.</p>

  <form id="setupForm" class="profile-form">
    <input type="text" id="name" placeholder="Full Name" required>

    <input type="email" id="email" placeholder="Email (optional)">

    <input type="number" id="age" placeholder="Age (optional)" min="10" max="80">

    <select id="gender">
      <option value="">Select Gender (optional)</option>
      <option value="Male">Male</option>
      <option value="Female">Female</option>
      <option value="Other">Other</option>
    </select>

    <button type="submit" class="submit-btn">Save & Continue</button>
  </form>
</section>

<footer>
  <p>© 2025 ProtenzaX | All Rights Reserved</p>
</footer>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
  import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "",
    authDomain: "",
    projectId: "",
    storageBucket: "",
    messagingSenderId: "",
    appId: ""
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth();
  const db = getFirestore();

  onAuthStateChanged(auth, (user) => {
    if (!user) {
      window.location.href = "login.html";
    }
  });

  document.getElementById("setupForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const user = auth.currentUser;

    const data = {
      name: document.getElementById("name").value.trim(),
      email: document.getElementById("email").value.trim(),
      age: document.getElementById("age").value.trim(),
      gender: document.getElementById("gender").value,
      phone: user.phoneNumber,
      createdAt: new Date()
    };

    await setDoc(doc(db, "users", user.uid), data);

    window.location.href = "account.html";
  });
</script>

<script src="script.js"></script>

</body>
</html>